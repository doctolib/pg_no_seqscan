-- Test that indexed queries don't trigger errors
-- Setup
LOAD 'pg_no_seqscan';
SET pg_no_seqscan.level = ERROR;
SET enable_seqscan = off;
CREATE TABLE test_pk (id bigint PRIMARY KEY);
INSERT INTO test_pk SELECT generate_series(1,10);
-- Allows query execution as an index is used
EXPLAIN (COSTS OFF)
SELECT * FROM test_pk WHERE id=1;
                  QUERY PLAN                   
-----------------------------------------------
 Index Only Scan using test_pk_pkey on test_pk
   Index Cond: (id = 1)
(2 rows)

SELECT * FROM test_pk WHERE id=1;
 id 
----
  1
(1 row)

-- Cleanup
DROP TABLE test_pk;
